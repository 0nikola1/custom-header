let e=document.querySelector("home-assistant");e=(e=(e=(e=(e=(e=(e=(e=e&&e.shadowRoot)&&e.querySelector("home-assistant-main"))&&e.shadowRoot)&&e.querySelector("app-drawer-layout partial-panel-resolver"))&&e.shadowRoot||e)&&e.querySelector("ha-panel-lovelace"))&&e.shadowRoot)&&e.querySelector("hui-root");const{lovelace:t}=e,o=e.shadowRoot,n=e=>{let o;const{views:n}=t.config;return isNaN(e)?n.forEach(t=>{t.title!==e&&t.path!==e||(o=n.indexOf(t))}):o=parseInt(e,10),o},r=e=>{const t="string"==typeof e?e.replace(/\s+/g,"").split(","):e;return t.forEach(e=>{t[t.indexOf(e)]=n(e)}),t},i={...t.config.custom_header};i.hide_tabs&&(i.hide_tabs=r(i.hide_tabs)),i.show_tabs&&(i.show_tabs=r(i.show_tabs));const a=Array.from(o.querySelectorAll("paper-tab"));if(i.show_tabs&&i.show_tabs.length){const e=[];for(let t=0;t<a.length;t+=1)e.push(t);i.hide_tabs=e.filter(e=>!i.show_tabs.includes(e))}const l={footer:!1,background:"var(--primary-color)",elements_color:"var(--text-primary-color)",menu_color:"",voice_color:"",options_color:"",all_tabs_color:"",tabs_color:[],chevrons:!0,indicator_top:!1,hide_tabs:[],show_tabs:[],...i};const c=function(){const e={},n=Array.from((o.querySelector("paper-tabs")||o).querySelectorAll("paper-tab"));e.tabContainer=document.createElement("paper-tabs"),e.tabContainer.setAttribute("scrollable",""),e.tabContainer.setAttribute("dir","ltr"),e.tabContainer.style.width="100%",e.tabContainer.style.marginLeft="0",n.forEach(r=>{const i=n.indexOf(r),a=r.cloneNode(!0),l=a.querySelector("ha-icon");l&&l.setAttribute("icon",t.config.views[i].icon),a.addEventListener("click",()=>{o.querySelector("paper-tabs").querySelectorAll("paper-tab")[i].dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))}),e.tabContainer.appendChild(a)}),e.tabs=e.tabContainer.querySelectorAll("paper-tab");const r=(t,n,r)=>{if("options"===t){e[t]=o.querySelector(r).cloneNode(!0),l.footer&&e[t].setAttribute("vertical-align","bottom"),e[t].removeAttribute("horizontal-offset"),e[t].querySelector("paper-icon-button").style.height="48px";const n=Array.from(e[t].querySelectorAll("paper-item"));n.forEach(e=>{const t=n.indexOf(e);e.addEventListener("click",()=>{o.querySelector(r).querySelectorAll("paper-item")[t].dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))})})}else e[t]=document.createElement("paper-icon-button"),e[t].addEventListener("click",()=>{o.querySelector(r).shadowRoot.querySelector("paper-icon-button").dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))});e[t].setAttribute("icon",n),e[t].setAttribute("buttonElem",t),e[t].style.flexShrink="0",e[t].style.height="48px"};return r("menu","mdi:menu","ha-menu-button"),r("voice","mdi:microphone","ha-start-voice-button"),r("options","mdi:dots-vertical","paper-menu-button"),e.container=document.createElement("cch-header"),l.footer||e.container.setAttribute("slot","header"),e.menu&&e.container.appendChild(e.menu),e.tabContainer&&e.container.appendChild(e.tabContainer),e.voice&&e.container.appendChild(e.voice),e.options&&e.container.appendChild(e.options),o.querySelector("ha-app-layout").appendChild(e.container),e}();function s(){o.querySelector("app-header").style.visibility="hidden";const e=getComputedStyle(o.querySelector("app-header")).getPropertyValue("height");let t=document.createElement("style");t.setAttribute("id","cch_header_style"),t.innerHTML=`\n      cch-header {\n        width:100%;\n        display:flex;\n        justify-content: center;\n        background: ${l.background};\n        color: ${l.elements_color};\n        ${0===c.tabs.length?"margin-top: 48px;":""}\n        ${l.footer?"position: sticky; bottom: 0px;":""}\n      }\n      hui-view, hui-panel-view {\n        margin-top: -${e};\n        padding-top: ${l.footer?"0px;":"53px;"}\n        ${l.footer?"padding-bottom: 48px;":""}\n        ${l.footer?"margin-bottom: -48px;":""}\n      }\n      hui-panel-view {\n        ${l.footer?"":"padding-top: 48px;"}\n      }\n      #view {\n        ${l.footer?"min-height: calc(100vh - 160px) !important;":""}\n      }\n      [buttonElem="menu"] {\n        ${l.menu_color?`color: ${l.menu_color};`:""}\n      }\n      [buttonElem="options"] {\n        ${l.options_color?`color: ${l.options_color};`:""}\n      }\n      [buttonElem="voice"] {\n        ${l.voice_color?`color: ${l.voice_color};`:""}\n      }\n      paper-tab {\n        ${l.all_tabs_color?`color: ${l.all_tabs_color};`:""}\n      }\n    `,l.tabs_color&&Object.keys(l.tabs_color).forEach(e=>{t.innerHTML+=`\n      paper-tab:nth-child(${n(e)+1}) {\n        color: ${l.tabs_color[e]};\n      }\n    `}),l.hide_tabs&&l.hide_tabs.forEach(e=>{t.innerHTML+=`\n      paper-tab:nth-child(${n(e)+1}) {\n        display: none;\n      }\n    `}),o.appendChild(t),(t=document.createElement("style")).setAttribute("id","cch_chevron"),t.innerHTML='\n      .not-visible[icon*="chevron"] {\n        display:none;\n      }\n    ',c.tabContainer.shadowRoot.appendChild(t),l.chevrons||(c.tabContainer.hideScrollButtons=!0),l.indicator_top&&(c.tabContainer.alignBottom=!0);let r=o.querySelector("ha-menu-button");const i=()=>{r.style.display="none","hidden"===r.style.visibility?(l.footer&&(c.menu.style.display="none"),c.menu.style.visibility="hidden",c.menu.style.marginRight="33px"):(c.menu.style.visibility="initial",c.menu.style.display="initial",c.menu.style.marginRight="")};i(),new MutationObserver(()=>{i()}).observe(r,{attributes:!0,attributeFilter:["style"]})}s(),new MutationObserver(e=>{e.forEach(({addedNodes:e,target:t})=>{"edit-mode"===t.className&&e.length?(window.scrollTo({top:0,behavior:"smooth"}),o.querySelector("app-header").style.visibility="initial",o.querySelector("cch-header").style.visibility="hidden",o.querySelector("#cch_header_style").remove(),c.menu.style.display="none"):"APP-HEADER"===t.nodeName&&e.length&&(c.menu.style.display="",o.querySelector("cch-header").style.visibility="initial",s())})}).observe(o.querySelector("app-header"),{childList:!0});
